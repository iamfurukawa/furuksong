(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/furuksong-web/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"22d7":function(e,t,n){"use strict";n("be87")},3935:function(e,t,n){},"44cd":function(e,t,n){},5465:function(e,t,n){"use strict";n("5955")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("ecee"),o=n("c074"),i=n("ad3d"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("Header"),n("SearchBar",{attrs:{selectOptions:e.selectOptions},on:{onType:e.onType,selectTag:e.selectTag}}),n("ListViewSound",{attrs:{audios:e.audios,filterValue:e.filterValue,tagSelected:e.tagSelected,ip:e.ip},on:{like:e.like}})],1)},c=[],u=n("2909"),l=n("1da1"),d=(n("96cf"),n("d81d"),n("ac1f"),n("1276"),n("498a"),n("99af"),n("4de4"),n("caad"),n("2532"),n("159b"),n("d3b7"),n("2ef0")),p=n.n(d),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[e._v("Furuksong")])},m=[],g={name:"Header"},v=g,h=(n("5465"),n("2877")),b=Object(h["a"])(v,f,m,!1,null,"20fa6a3c",null),y=b.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"searchBar"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Sound name"},domProps:{value:e.search},on:{keyup:function(t){return e.$emit("onType",t.target.value)},focus:function(t){return e.onFocus()},input:function(t){t.target.composing||(e.search=t.target.value)}}}),n("select",{attrs:{name:"tags",id:"tags"},on:{change:function(t){return e.$emit("selectTag",t.target.value)}}},[n("option",{attrs:{value:"todos"}},[e._v("Todos")]),n("option",{attrs:{value:"Like"}},[e._v("Like")]),e._l(this.selectOptions.filter((function(e){return"Like"!==e})),(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)])},k=[],S=(n("841c"),{name:"SearchBar",props:["selectOptions","selectTag"],data:function(){return{search:""}},methods:{onFocus:function(){this.search="",this.$emit("onType","")}}}),O=S,x=(n("dde3"),Object(h["a"])(O,w,k,!1,null,"27c1b8aa",null)),_=x.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"listViewSound"},[e._l(e.audios.filter((function(t){return(t.displayName.toUpperCase().includes(e.filterValue.toUpperCase())||t.tags.includes(e.capitalize(e.filterValue)))&&("todos"===e.tagSelected||t.tags.includes(e.tagSelected))})),(function(t){return n("SoundCard",{key:JSON.stringify({uuid:t.uuid,tags:t.tags}),attrs:{displayName:t.displayName,uuid:t.uuid,tags:t.tags,playedTimes:t.playedTimes,ip:e.ip},on:{likeEvent:e.likeEvent,showModal:e.showModal}})})),n("Modal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal}})],2)},I=[],C=(n("fb6a"),n("a15b"),function(){var e=function(e){return localStorage.setItem("app_version",e)},t=function(){return localStorage.getItem("app_version")},n=function(e){var t=JSON.stringify({sounds:e});localStorage.setItem("sounds",t)},r=function(){var e=localStorage.getItem("sounds");return e?JSON.parse(e).sounds:null},a=function(e){var t=JSON.stringify({likes:e});localStorage.setItem("likes",t)},o=function(){var e=localStorage.getItem("likes");return e?JSON.parse(e).likes:[]},i=function(e){e=e.split(" ").join("¬");var t=JSON.stringify({discordId:e});localStorage.setItem("discordId",t)},s=function(){var e=localStorage.getItem("discordId");return e?JSON.parse(e).discordId:null};return{saveVersion:e,getVersion:t,saveSounds:n,getSounds:r,saveLikes:a,getLikes:o,saveDiscordId:i,getDiscordId:s}}),R=C(),T=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"card"},[r("div",{staticClass:"topBar",on:{click:function(){return t.handleClick(e.uuid,e.ip)&&t.$emit("showModal")}}},[r("font-awesome-icon",{staticClass:"icon",attrs:{icon:"music"}}),r("h3",[t._v(t._s(this.displayName.substring(0,50))+" "+t._s(this.displayName.length>50?"...":""))])],1),r("div",{staticClass:"bottomBar"},[r("font-awesome-icon",{class:t.getStarStyle(t.tags),attrs:{icon:"star"},on:{click:function(e){return t.$emit("likeEvent",{tags:t.tags,uuidSound:t.uuid})}}}),r("span",{staticClass:"tag"},[t._v(" "+t._s(t.playedTimes)+" ")]),t._l(t.tags,(function(e){return r("span",{key:e,staticClass:"tag"},[t._v(t._s(e))])}))],2)])},V=[],L=n("ade3"),M=n("260b"),N=function(){var e=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M["a"].database().ref("/").update(Object(L["a"])({},t,"".concat(n," ").concat(a," ").concat(r)));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();return{update:e}},$=N(),E={name:"SoundCard",props:["displayName","uuid","tags","ip","likeEvent","playedTimes","showModal"],methods:{handleClick:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=R.getDiscordId(),!r){e.next=4;break}return e.next=4,$.update("RequestSoundMonitoring",t,n,r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),getStarStyle:function(e){return e.includes("Like")?"star-gold":"star-gray"}}},A=E,D=(n("c8f0"),Object(h["a"])(A,T,V,!1,null,"6c6c0729",null)),B=D.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"modal-fade"}},[r("div",{staticClass:"modal-backdrop"},[r("div",{staticClass:"modal",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[r("header",{staticClass:"modal-header",attrs:{id:"modalTitle"}},[e._t("header",[e._v(" Você não tem um usuário do discord selecionado ")])],2),r("section",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[e._t("body",[r("center",[r("label",{attrs:{for:"fname"}},[e._v("Qual é o seu discord id?")]),r("br"),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.discordId,expression:"discordId"}],attrs:{type:"text",id:"fname",name:"fname"},domProps:{value:e.discordId},on:{input:function(t){t.target.composing||(e.discordId=t.target.value)}}}),r("br"),r("br"),r("label",{attrs:{for:"fname"}},[e._v("Aonde encontrar:")]),r("br"),r("br"),r("img",{attrs:{src:n("959a")}})])])],2),r("footer",{staticClass:"modal-footer"},[r("button",{staticClass:"btn-green",attrs:{type:"button","aria-label":"Close modal"},on:{click:e.close}},[e._v(" Salvar ")])])])])])},J=[],z={name:"Modal",data:function(){return{discordId:""}},methods:{close:function(){R.saveDiscordId(this.discordId),this.$emit("close")}}},U=z,F=(n("22d7"),Object(h["a"])(U,P,J,!1,null,null,null)),H=F.exports,q={name:"ListViewSound",components:{SoundCard:B,Modal:H},data:function(){return{isModalVisible:!1}},props:["audios","filterValue","tagSelected","ip","like"],methods:{likeEvent:function(e){var t=e.tags,n=e.uuidSound;this.$emit("like",{tags:t,uuidSound:n})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},showModal:function(){R.getDiscordId()||(this.isModalVisible=!0)},closeModal:function(){this.isModalVisible=!1}}},K=q,Q=(n("c8c5"),Object(h["a"])(K,j,I,!1,null,"2f82f586",null)),W=Q.exports,Y=(n("e71f"),n("ae8c"),function(){var e=function(){return{apiKey:"AIzaSyAIzwheovszYOCgKQeFbWAjyNzk4t-jS28",authDomain:"furuksong.firebaseapp.com",projectId:"furuksong",storageBucket:"furuksong.appspot.com",messagingSenderId:"511657412828",appId:"1:511657412828:web:e82110995aff6804414c19"}},t=function(){return M["a"].apps.length?M["a"].app():M["a"].initializeApp(e(),{databaseURL:"https://furuksong-default-rtdb.firebaseio.com/"})};return{app:t}}),G=Y(),X=function(){var e=function(){return G.app().firestore()},t=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e().collection(n).doc(r).add(a);case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),n=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n,r,a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e().collection(n).doc(r);case 2:o=t.sent,o.update(a);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),r=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e().collection("sounds").get());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e().collection(n).doc(r).delete());case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e().collection("version").get());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{save:t,get:r,update:n,remove:a,version:o}},Z=X(),ee={name:"App",components:{Header:y,SearchBar:_,ListViewSound:W},data:function(){return{audios:[],filterValue:"",selectOptions:"",tagSelected:"todos",ip:""}},methods:{getAudios:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=R.getVersion(),t.next=3,Z.version();case 3:if(r=t.sent.docs[0].id,a=R.getSounds(),console.log("Actual Version: ".concat(r)),console.log("Local Version: ".concat(n)),n!==r||!a){t.next=11;break}return console.log("Using Local Storage."),e.audios=p.a.sortBy(a,["playedTimes"]).reverse(),t.abrupt("return");case 11:return R.saveVersion(r),t.next=14,Z.get();case 14:a=t.sent,e.audios=a.docs.map((function(e){var t=e.data().displayName.replaceAll("[","").split("]"),n=t.map((function(e){return e.trim()}));return{uuid:e.id,displayName:n.pop(),playedTimes:e.data().playedTimes,tags:n}})),R.saveSounds(e.audios),e.audios=p.a.sortBy(e.audios,["playedTimes"]).reverse(),console.log("Using Firebase.");case 19:case"end":return t.stop()}}),t)})))()},onType:function(e){this.filterValue=e},selectTag:function(e){this.tagSelected=e},like:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.tags,a=e.uuidSound,o=R.getLikes(),i=function(e){console.log("set like"),R.saveLikes([].concat(Object(u["a"])(o),[e]))},s=function(e){console.log("removing like"),R.saveLikes(o.filter((function(t){return t!==e})))},r.includes("Like")?s(a):i(a),n.abrupt("return",t.loadData());case 6:case"end":return n.stop()}}),n)})))()},reloadTags:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=R.getLikes(),r=[],a=[],e.audios.forEach((function(e){n.includes(e.uuid)&&(e.tags=[].concat(Object(u["a"])(e.tags),["Like"]),r.push(e.uuid)),a.push.apply(a,Object(u["a"])(e.tags))})),e.selectOptions=p.a.sortBy(p.a.uniq(a)),R.saveLikes(r),t.next=8,fetch("https://api.ipify.org?format=json").then((function(e){return e.json()}));case 8:e.ip=t.sent.ip;case 9:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAudios();case 2:return t.next=4,e.reloadTags();case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:case"end":return t.stop()}}),t)})))()}},te=ee,ne=(n("5c0b"),Object(h["a"])(te,s,c,!1,null,null,null)),re=ne.exports;a["c"].add(o["a"]),a["c"].add(o["b"]),r["a"].component("font-awesome-icon",i["a"]),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(re)}}).$mount("#app")},5955:function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"959a":function(e,t,n){e.exports=n.p+"img/discordid.fb17b423.gif"},"9c0c":function(e,t,n){},b161:function(e,t,n){},be87:function(e,t,n){},c8c5:function(e,t,n){"use strict";n("44cd")},c8f0:function(e,t,n){"use strict";n("b161")},dde3:function(e,t,n){"use strict";n("3935")}});
//# sourceMappingURL=app.03ef40db.js.map